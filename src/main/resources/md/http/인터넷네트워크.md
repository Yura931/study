# 인터넷 네트워크

### 1. 인터넷 통신
> - 인터넷에서 컴퓨터 둘은 어떻게 통신할까? 
>   - 클라이언트와 서버가 바로 옆에 붙어있으면 연결된 케이블로 주고받을 수 있음
> - 중간에 인터넷이 있음
> - 미국에 사는 친구에게 메세지 보내고 싶음 ...
> - 어떤 규칙으로? 목적지까지 안전하게 도착할까??

### 2. IP(인터넷 프로토콜)
> - 인터넷 망에서 메세지를 보낼 때 이 IP가 필요
> - 나도 필요하고 받는 친구도 IP가 필요
>   - IP인터넷 프로토콜 역할
>     - 지정한 IP 주소(IP Address)에 데이터 전달
>     - 패킷(Packet)이라는 통신 단위로 데이터 전달
>   - IP 패킷이라는 규칙
>     - IP패킷(나의 IP, 목적지 IP, 메세지)
>     - 노드들이 IP패킷에 있는 내용을 보고 목적지까지 던져줌
> 
>> - IP프로토콜이라고 하는 IP 주소를 부여하고 이걸 찾아가는 방식  
>>   IP라는 패킷에 담는 방식은 한계가 있음
>>   - 비연결성
>>     - 패킷을 받을 대상이 없거나 서비스 불능 상태여도 패킷 전송
>>   - 비신뢰성
>>     - 중간에 패킷이 사라지거나, 패킷을 여러개 보냇을 때 순서대로 오지 않을 수 있음
>>   - 프로그램 구분
>>     - 같은 IP를 사용하는 서버에서 통신하는 애플리케이션이 둘 이상인 경우 어떻게 구분할 것이냐
>
> - 대상 서버가 패킷을 받을 수 있는 상태인지 모름
> - 서버들을 거쳐 전달이 되는데 중간 서버가 문제가 생기면 내가 보낸 패킷이 유실 됨..(소실되도 모름..)
> - 패킷 용량이 큰 경우
>   - Hello world를 1. Hello, 2. world!로 보냈는데 패킷들이 중간에 다른 노드를 탈 수 있음
>   - 나의 의도와는 다르게 world! Hello 이렇게 도착할 수도 있음
>
>> * IP프로토콜 만으로는 이 문제를 해결 할 수 없음!
>> * 이 문제를 해결해주는 것이 TCP 프로토콜
>> * 패킷 : 패키지, 덩어리를 뜻하는 버킷을 합친 단어

### 3. TCP
> - 인터넷 프로토콜 스택의 4계층
>> - 애플리케이션 계층 - HTTP, FTP
>> - 전송 계층 - TCP, UDP
>> - 인터넷 계층 - IP
>> - 네트워크 인터페이스 계층(랜카드 ,랜드라이버)
>
> 1. 프로그램이 Hello, world! 메시지 생성
> 2. SOCKET 라이브러리를 통해 전달
> 3. TCP 정보 생성, 메시지 데이터 포함
> 4. IP 패킷 생성, TCP 데이터 포함
> 5. 네트워크 인터페이스를 통해서 랜카드를 통해 나갈 때 Ethernet frame이 포함되어 나감
>
> - TCP / IP 패킷 정보
>   - IP 패킷 : 출발지 IP, 목적지 IP, 기타 ~~
>     - TCP 세그먼트 : 출발지 PORT, 목적지 PORT, 전송제어, 순서, 검증정보, 전송 데이터
>       - IP만으로 해결되지 않았던 순서문제 해결
>
> - TCP 특징
>   - 전송 제어 프로토콜(Transmission Control Protocol)
>     - 연결지향 - TCP 3 way handshake(가상 연결) : 먼저 연결을 한 다음 메시지를 보낸다.(친구 집 컴퓨터 꺼져있으면 연결이 잘 안됨..)
>     - 데이터 전달 보증 : 패킷이 중간에 누락되었을 경우 내가 알 수 있음
>     - 순서 보장
>     - 신뢰할 수 있는 프로토콜
>     - 현재는 대부분 TCP 사용
>
> 
> - TCP 3 way handshake
>   - 클라이언트에서 서버로 먼저 1번 Synchronize(SYN) 메세지 보냄
>   - 서버에서는 ACK 라는 요청수락과 함께 클라이언트에게 SYN을 보냄
>   - 클라이언트도 SYN을 받아 ACK라는 응답을 보냄
>   - SYN - SYN & ACK - ACK
>   - 연결이 된 후 데이터를 주고 받음
>   - 서버가 꺼져있는경우 SYN 메시지를 보냈을 때 서버에 응답이 없음 클라이언트에서 서버에 문제가 있구나 연결이 안된다는 것을 알 수 있음
>   - 요즘은 최적화가 되어 있어 마지막 ACK를 보낼 때 데이터를 함께 전송
> 
>> 중간에 수많은 서버들이 있음.. 논리적으로만 연결된 것이라 이해
>
> - 데이터 전달 보증
>   - TCP가 붙게되면 데이터를 전송했을 경우 서버에서 데이터를 잘 받았다 응답해줌
> - 순서 보장
>   - packet 1, 2, 3 순서 전송 
>   - 만약 서버에 1, 3, 2 순서로 도착하면 나머지를 다 버리고 서버가 클라이언트에게 2번부터 다시 보내도록 처리
>   - TCP에 정보가 있기때문에 가능한 것

### 4. UDP
> - TCP와 같은 계층에 있는 프로토콜
> - 사용자 데이터그램 포로토콜(User Datagram Protocol)
>   - 하얀 도화지에 비유(기능이 거의 없음)
>   - 데이터 전달 및 순서가 보장되지 않지만, 단순하고 빠름
>   - IP와 거의 같다.
>   - PORT, 체크섬 정도만 추가!
>   - 애플리케이션에서 추가 작업 필요
>   - 하나의 IP에서 여러 애플리케이션이 실행될 때(게임도하고 음악도 듣고 있고 여러 패킷이 올 때)
>   - 어떤 패킷이 음악용이고, 게임용인지 구분할 때
>
>> - 뭔가 더 최적화하고 싶을 때 tcp는 그대로 쓰고 udp를 사용!  
>> 애플리케이션 레벨에서 내가 무언가 최적화 시키면 됨
>> - HTTP3 UDP 사용!


### 5. PORT(항구)
> - 같은 IP 내에서 프로세스 구분
> - 한 번에 둘 이상 연결해야 한다면
>   - 게임도 하고 화상통화도 하고 웹 브라우저 요청도 함
>   - 한 번에 여러 개 서버와 통신
>   - 패킷들이 나에게 올 때 어디에서 오는것인지 구분을 어떻게 할 것이냐
> - IP : 목적지 서버를 찾는 것
> - PORT : 서버 안에서 돌아가는 애플리케이션들을 구분하는 것
> - TCP/IP : 출발지IP, 출발지PORT, 목적지IP, 목적지PORT, 전송 데이터
> IP는 아파트 PORT는 몇동 몇호!
> 
> - 0 ~ 65535 할당 가능
> - 0 ~ 1023 : 잘 알려진 포트, 사용하지 않는 것이 좋음
>   - FTP - 20, 21
>   - TELNET - 23
>   - HTTP - 80
>   - HTTPS - 443

### 6. DNS
> - 도메인 네임 시스템(Domain Name System)
>   - 전화번호부
>   - 도메인 명을 IP 주소로 변환
>   - DNS서버에 도메인을 등록할 수 있음
> - IP는 기억하기 어려움
> - IP는 변경될 수 있음 -> 접근 못하게 될 수도.. 바뀐 IP 모양..
>> 문제 해결 가능!


---
인터넷망을 메시지를 보내기 위해선   
인터넷 프로토콜이라는 IP가 있어야 한다.!  
IP 프로토콜만 가지고는 메시지가 잘 도착하는지 신뢰하기 어렵고  
메시지 순서가 꼬일 수 있고  
이런 문제를 TCP가 해결해 준다.  
UDP는 IP와 비슷한데 PORT만 추가!  
백지 상태지만 무언가 필요하다면  
내가 애플리케이션 내에서 기능을 확장할 수 있다.  
포트는 같은 IP안에서 동작하는 애플리케이션을 구분하기 위해 사용  
DNS는 IP는 변하기 쉽고 외우기 어려운데 도메인을 등록해 사용할 수 있도록 해줌  
 