# 옵티마이저와 실행계획

- 사용자가 질의한 SQL문에 대해 최적의 실행 방법을 결정하는 역할을 수행
- 최적의 실행 방법을 실행계획(Execution Plan)이라고 함
- 다양한 실행 방법들 중에서 최적의 실행 방법을 결정하는 것이 옵티마이저의 역할
- 현재 대부분의 관계형 데이터베이스는 비용기반 옵티마이저만을 제공

## 규칙기반 옵티마이저
- 규칙(우선 순위)을 가지고 실행계획을 생성
- 실행계획을 생성하는 규칙을 이해하면 누구나 실행계획을 비교적 쉽게 예측할 수 있음
- 우선 순위가 높은 규칙이 적은 일량으로 해당 작업을 수행하는 방법이라고 판단
- 제일 낮은 우선순위는 전체 테이블 스캔, 제일 높은 우선순위는 ROWID를 활용하여 테이블을 액세스하는 방법

## 비용기반 옵티마이저
- 규칙기반 옵티마이저는 조건절에서 '=' 연산자와 'BETWEEN' 연산자가 사용되면 규칙에 따라 '=' 칼럼의 인덱스를 사용하는 것이 보다 적은 일량 즉, 보다 적은 처리 범위로 작업을 할 것이라고 판단
- 실제로는 'BETWEEN' 칼럼을 사용한 인덱스가 보다 일량이 적을 수 있음
- 규칙기반 옵티마이저의 단점을 극복하기 위해 출현
- SQL문을 처리하는데 필요한 비용이 가장 적은 실행계획을 선택하는 방식
- 비용 : SQL문을 처리하기 위해 예상되는 소요시간 또는 자원 사용량을 의미
- 비용을 예측하기 위해 테이블, 인덱스, 칼럼 등의 다양한 객체 통계정보와 시스템 통계정보 등을 이용
- 툥계정보를 유지하는 것은 비용기반 최적화에서 중요한 요소

## 실행계획
- SQL에서 요구한 사항을 처리하기 위한 절차와 방법
- SQL을 어떤 순서로 어떻게 실해할 지를 결정
- 동일한 SQL에 대해 결과를 낼 수 있는 다양한 처리 방법(실행계획)이 존재할 수 있지만 각 처리 방법마다 실행 시간(성능)은 서로 다를 수 있음ㅁ
- 옵티마이저는 최적의 실행계획을 생성해 줌
- 벤더마다 보는 방법은 다르지만 SQL 처리를 위한 절차와 방법을 의미한다는 기본적인 사항은 모두 동일

## SQL 처리 흐름도(Access Flow Diagram)
- SQL의 내부적인 처리 절차를 시각적으로 표현한 도표(실행계획을 시각화 한 것)
- 인덱스 스캔 및 전체 테이블 스캔 등의 액세스 기법을 표현할 수 있으며, 성능적인 측면도 표현할 수 있음
- 처리 흐름도만 보고 실행 시간을 알 수는 없음
