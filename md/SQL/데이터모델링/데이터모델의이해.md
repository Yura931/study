# 데이터 모델의 이해

## 모델링의 정의
> 사람이 살아가면서 나타날 수 있는 다양한 현상은 사람, 사물, 개념 등에 의해 발생된다고 할 수 있으며 모델링은 이것을  표기법에 의해 규칙을 가지고 표기하는 것 자체를 의미한다.  
> 즉 모델을 만들어가는 일 자체를 모델링으로 정의할 수 있다.
>> 복잡한 현실세계를 일정한 표기법에 의해 표현하는 일 

- 복잡한 '현실세계'를 단순화시켜 표현하는 것
- 모델이란 사물 또는 사건에 관한 양상(Aspect)이나 관점(Perspective)을 연관된 사람이나 그룹을 위하여 명화갛게 하는 것
- 모델이란 현실 세계의 추상화된 반영

## 모델링의 특징
1. 추상화
   - 현실세계를 일정한 형식에 맞추어 표현
   - 다양한 현상을 일정한 양식인 표기법에 의해 표현
2. 단순화
    - 복잡한 현실세계를 약속된 규약에 의해 제한된 표기법이나 언어로 표현하여 쉽게 이해할 수 있도록 하는 개념
3. 명확화
    - 누구나 이해하기 쉽게 하기 위해 대상에 대한 애매모호함을 제거하고 정확하게 현상을 기술하는 것

## 모델링의 세 가지 관점
1. 데이터관점
    - 업무가 어떤 데이터와 관련이 있는지 또는 데이터간의 관계는 무엇인지에 대해서 보델링하는 방법(What, Data)
2. 프로세스관점
    - 업무가 실제하고 있는 일은 무엇인지 또는 무엇을 해야 하는지를 모델링하는 방법(How, Process)
3. 데이터와 프로세스의 상관관점
    - 업무가 처리하는 일의 방법에 따라 데이터는 어떻게 영향을 받고 있는지 모델링하는 방법(Interaction)

## 모델링의 정의
- 정보시스템을 구축하기 위해, 해당 업무에 어떤 데이터가 존재하는지 또는 업무가 필요로 하는 정보는 무엇인지를 분석하는 방법
- 기업 업무에 대한 종합적인 이해를 바탕으로 데이터에 존재하는 업무 규칙(BUSINESS RULE)에 대하여 참 또는 거짓을 판별할 수 있는 사실(사실명제)을 
    데이터에 접근하는 방법(How), 사람(Who), 전산화와는 별개의(독립적인) 관점에서 이를 명확하게 표현하는 추상화 기법
- 정보시스템 구축을 위한 데이터관점, 프로세스관점의  업무 분석
- 데이터베이스 구축을 위한 분석 및 설계하는 과정의 의미

## 데이터 모델이 제공하는 기능
- 시스템을 현재 또는 원하는 모습으로 가시화하도록 도와준다.
- 시스템의 구조와 행동을 명세화 할 수 있게 한다.
- 시스템을 구축하는 구조화된 틀을 제공한다.
- 시스템을 구축하는 과정에서 결정한 것을 문서화한다.
- 다양한 영역에 집중하기 위해 다른 영역의 세부 사항은 숨기는 다양한 관점을 제공한다.
- 특정 목표에 따라 구체화된 상세 수준의 표현방법을 제공한다.

## 데이터 모델링의 중요성

### 파급효과(Leverage)
- 병행테스트, 통합테스트를 수행하는 시점에 데이터 모델의 변경이 불가피한 상황이 발생한다고 했을 때 데이터 구조의 변경에 따른 표준 영향분석, 응용 변경 영향 분석 등 많은 영향 분석이 일어남
- 이후 해당 분야의 실제적인 변경 작업이 발생
- 변경을 해야 하는 데이터 모델의 형태에 따라서 그 영향정도는 차이가 있겠지만 이 시기의 데이터 구조의 변경으로 인한 일련의 변경작업은 전체 시스템 구축 프로젝트에서 큰 위험요소이다.
- 시스템 구축 작업 중에서 다른 어떤 설계 과정보다 데이터 설계가 더 중요하다 볼 수 있다.

### 복잡한 정보 요구사항의 간결한 표현(Conciseness)
- 데이터 모델은 구축할 시스템의 정보 요구사항과 한계를 가장 명확하고 간결하게 표현할 수 있는 도구
- 건축물로 비유하자면 설계 도면
- 시스템을 구축하는 많은 관련자들이 설계자의 생각대로 정보요구사항을 이해하고 이를 운용할 수 있는 애플리케이션을 개발하고 데이터 정합성을 유지할 수 있도록 하는 것

### 데이터 품질(Data Quality)
- 데이터베이스에 담겨 있는 데이터는 기업의 중요한 자산
- 오래도록 저장되어진 데이터가 그저 그런 데이터, 정확성이 떨어지는 데이터라고 한다면 해당 데이터로 얻을 수 있었던 소중한 비즈니스의 기회를 상실할 수도 있는 문제
- 데이터의 문제는 오랜 기간 숙성된 데이터를 전략적으로 활용하려고 하는 시점에 문제가 대두됨
- 데이터 구조의 문제로 인한 데이터 품질의 문제는 치유하기에 불가능한 경우가 대부분
- 
#### 데이터 모델링을 할 때 유의점
1. 중복(Duplication)
    - 데이터 모델은 같은 데이터를 사용하는 사람, 시간, 그리고 장소를 파악하는데 도움을 준다.
    - 이러한 지식 응용은 데이터베이스가 여러 장소에 같은 정보를 저장하는 잘못을 하지 않도록 한다.
2. 비유연성(Inflexibility)
    - 데이터의 정의를 데이터의 사용 프로세스와 분리함으로써 데이터 모델링은 데이터 혹은 프로세스의 작은 변화가 애플리케이션과 데이터베이스에 중대한 변화를 일으킬 수 있는 가능성을 줄인다.
3. 비일관성(Inconsistency)
    - 데이터의 중복이 없더라도 비일관성은 발생한다.
    - 개발자가 다른 데이터와 모순된다는 고려 없이 일련의 데이터를 수정할 수 있기 때문
    - 데이터 모델링을 할 때 데이터와 데이터간 상호 연관 관계에 대한 명확한 정의는 이러한 위험을 사전에 예방할 수 있도록 해준다.

## 데이터 모델링의 3단계 진행
1. 개념적 데이터 모델링
    - 조직, 사용자의 데이터 요구사항을 찾고 분석하는데서 시작
    - 추상화 수준이 높고 업무중심적이고 포괄적인 수준의 모델링 진행
    - 전사적 데이터 모델링
    - EA수립시 많이 이용
2. 논리적 데이터 모델링
    - 시스템으로 구축하고자 하는 업무에 대해 Key, 속성, 관계 등을 정확하게 표현
    - 재사용성이 높음
    - 이 단계에서 수행하는 중요한 활동 정규화
    - 정규화는 논리 데이터 모델 상세화 과정의 대표적인 활동으로, 논리 데이터 모델의 일관성을 확보하고 중복을 제거하여 속성들이 가장 적절한 엔터티에 배치되도록 함으로써 보다 신뢰성있는 데이터구조를 얻는데 목적이 있다.
    - 상세화
      - 식별자 확정, 정규화, M:M관계 해소, 참조 무결성 규칙 정의 등
3. 물리적 데이터 모델링
    - 논리 데이터 모델이 데이터 저장소로서 어떻게 컴퓨터 하드웨어에 표현될 것인가
    - 데이터가 물리적으로 컴퓨터에 어떻게 저장될 것인가에 대한 정의를 물리적 스키마라고 함
    - 실제로 데이터베이스에 이식할 수 있도록 성능, 저장 등 물리적인 성격을 고려하여 설계

## 데이터독립성의 필요성
- 각 View의 독립성을 유지하고 계층별 View에 영향을 주지 않고 변경이 가능하다.
- 단계별 Schema에 따라 정의어(DDL)와 데이터 조작어(DML)가 다름을 제공한다.
- 3단계로 표현된 ANSI 표준 모델
  - 구조, 독립성, 사상(Mapping)

### 데이터베이스 3단계 구조
서로 간섭되지 않는 모델
- 외부단계 
  - 개별 사용자들 관점
- 개념적 단계
  - 전체 데이터베이스의 논리적 구조를 기술, 개념 스키마가 존재함
- 내부적 단계
  - 데이터베이스에 어떤 데이터가 어떻게 저장되어 있는가를 기술, 내부 스키마를 가짐

### 데이터독립성 요소
> 데이터베이스 스키마 구조는 3단계로 구분되고 각각은 상호 독립적인 의미를 가지고 고유한 기능을 가진다.  
> 데이터 모델링은 통합관점의 뷰를 가지고 있는 개념 스키마를 만들어가는 과정으로 이해할 수 있다.

- 외부스키마(External Schema)
  - View 단계 여러 개의 사용자 관점으로 구성, 즉 개개 사용자 단계로서 개개 사용자가 보는 개인적 DB스키마
  - DB의 개개 사용자나 응용프로그래머가 접근하는 DB정의
  - 사용자 관점
  - 접근하는 특성에 따른 스키마 구성
- 개념스키마(Conceptual Schema)
  - 개념단계 하나의 개념적 스키마로 구성 모든 사용자 관점을 통합한 조직 전체의 DB를 기술하는 것
  - 모든 응용시스템들이나 사용자들이 필요로 하는 데이터를 통합한 조직 전체의 DB를 기술한 것으로 DB에 저장되는 데이터와 그들간의 관계를 표현하는 스키마
  - 통합 관점
- 내부스키마(Internal Schema)
  - 내부단계, 내부 스키마로 구성
  - DB가 물리적으로 저장된 형식
  - 물리적 장치에서 데이터가 실제적으로 저장되는 방법을 표현하는 스키마
  - 물리적 저장구조

## 두 영역의 데이터독립성
> 분리된 3단계 개념 각각의 영역에 대한 독립성을 지정하는 용어

- 논리적 독립성
  - 개념 스키마가 변경되어도 외부 스키마에는 영향을 미치지 않도록 지원하는 것
  - 논리적 구조가 변경되어도 응용 프로그램에 영향 없음
  - 사용자 특성에 맞는 변경가능
  - 통합 구조 변경 가능
- 물리적 독립성
  - 내부스키마가 변경되어도 외부/개념 스키마는 영향을 받지 않도록 지원하는 것
  - 저장장치의 구조변경은 응용프로그램과 개념스키마에 영향 없음
  - 물리적 구조 영향 없이 개념구조 변경가능
  - 개념구조 영향 없이 물리적인 구조 변경 가능

## 사상(Mapping)
> 상호 독립적인 개념을 연결시켜주는 다리  
> 각 단계의 독립성을 보장하기 위해서 변경사항이 발생했을 때 DBA가 적절하게 작업을 해주기 때문에 독립성이 보장된다고도 할 수 있다.
- 외부적/개념적 사상(논리적 사상)
  - 외부적 뷰와 개념적 뷰의 상호 관련성읠 정의
  - 사용자가 접근하는 형식에 따라 다른 타입의 필드를 가질 수 있음
  - 개념적 뷰의 필드 타입은 변화가 없음
  - 외부 화면이나 사용자에게 인터페이스하기 위한 스키마 구조는 전체가 통합된 개념적 스키마와 연결된다
- 개념적/내부적 사상(물리적 사상)
  - 개념적 뷰와 저장된 데이터베이스의 상호관련성 정의
  - 만약 저장된 데이터베이스 구조가 바뀐다면 개념적/내부적 사상이 바뀌어야 함
  - 그래야 개념적 스키마가 그대로 남아있게 됨
  - 통합된 개념적 스키마 구조와 물리적으로 저장된 구조의 물리적인 테이블스페이스와 연결되는 구조
 
## 데이터 모델링의 세가지 요소
1. Things
    - 업무가 관여하는 어떤 것
    - 사물이나 사건 등을 바라 볼 때 전체를 지칭하는 용어
2. Attributes
    - 어떤 것이 가지는 성격
3. Relationships
    - 업무가 관여하는 어떤 것 간의 관계
    - 각각의 어떤 것이 다른 어떤 것과 연관성을 가지는 것

## 단수와 집합(복수)의 명명
용어의 구분정의

| 개념                                         | 복수/집합개념/타입/클래스                      |개별/단수개념/어커런스/인스턴스|
|--------------------------------------------|-------------------------------------|---|
| 어떤 것(Things)                               | 엔터티 타입(Entity Type)</br>엔터티(Entity) |엔터티(Entity)</br>인스턴스(Instance), 어커런스(Occurrence)|
| 어떤 것간의 연관</br>(Association between Things) | 관계(Relationship)                    |페어링(Pairing)|
| 어떤 것의 성격</br>(Characteristic of a Thing)   | 속성(Attribute)                       |속성값(Attribute Value)|

## 좋은 데이터 모델의 요소
- 완전성(Completeness)
- 중복배제(Non-Redundancy)
- 업무규칙(Business Rules)
- 데이터 재사용(Data Reusability)
- 의사소통(Communication)
- 통합성(Integration)