# 정규화

## 정규화를 통한 성능 향상 전략
- 데이터에 대한 중복성을 제거해주고 데이터가 관심사별로 처리되는 경우가 많아 성능이 향상되는 특징을 가지고 있음
- 엔터티가 계속 발생되므로 SQL문장에서 조인이 많이 발생하여 이로 인한 성능저하가 나타나는 경우도 있지만 이런 부분은 사례별로 유의하여 반정규화를 적용하는 전략이 필요
- 데이터베이스에서 데이터를 처리할 때 성능이라고 하면 조회 성능과 입력/수정/삭제 성능의 두 부류로 구분
- 이 두 가지 성능이 모두 우수하면 좋겠지만 데이터 모델을 구성하는 방식에 따라 두 성능이 Trade-Off 되어 나타나는 경우가 많음
- 정규화를 수행한다는 것은 데이터를 결정하는 결정자에 의해 함수적 종속을 가지고 있는 일반속성을 의존자로 하여 입력/수정/삭제 이상을 제거하는 것
- 데이터의 중복속성을 제거하고 결정자에 의해 동일한 의미의 일반속성이 하나의 테이블로 집약되므로 한 테이블의 데이터 용량이 최소화되는 효과가 있음
- 정규화된 테이블은 데이터를 처리할 때 속도가빨라질 수도 있고 느려질 수도 있는 특성이 있음

> 모델링을 할 때 반정규화만이 조회 성능을 향상시킨다는 고정관념 탈피  
> 정규화를 해서 성능이 저하되는것이 아닌 정규화를 해야만 성능이 향상되는 경우가 아주 많이 나타나기 때문

- 2차 정규화를 적용한 테이블에 대해서 조인을 하더라도 PK Unique Index를 이용하면 조인 성능 저하는 미미하게 발생


## 함수적 종속성(Functional Dependency)에 근거한 정규화 수행 필요
- 함수의 종속성(Functional Dependency)은 데이터들이 어떤 기준값에 의해 종속되는 현상을 지침하는 것
- 기준값을 결정자(Determinant)라 하고 종속되는 값을 종속자(Dependent)라고 한다.

- 사람이라는 엔터티가 주민등록번호, 이름, 출생지, 호주라는 속성이 존재 할 때 이름, 출생지, 호주라는 속성은 주민등록번호 속성에 종속된다.
- 어떤 사람의 주민등록번호가 신고되면 그 사람의 이름, 출생지, 호주가 생성되어 하나의 값만을 가지게 된다.


- 정규화의 궁극적인 목적은 반복적인 데이터를 분리하고 각 데이터가 종속된 테이블에 적절하게 배치되도록 하는 것
- 함수의 종속성을 이용하여 정규화 작업이나 각 오브젝트에 속성을 배치하는 작업에 이용이 되는 것
- 기본적으로 데이터는 속성간의 함수종속성에 근거하여 정규화되어야 한다.


# 간단정리
## 개념
- 데이터의 일관성, 최소한의 중복, 최대한의 데이터 유연성을 위한 방법
- 데이터를 분해하는 과정
- 정해진 규칙을 따라 데이터를 이용하기 쉽게 만드는 일
- 데이터의 중복을 제거한다.
- 데이터 모델의 독립성을 확보한다.
- 데이터 이상현상(Abnormality)을 줄이기 위한 설계 기법
- 엔터티를 상세화하는 과정이며 논리 데이터 모델링 수행 시점에서 고려

## 이상현상
- 삽입이상: 행(Row) 삽입 시 지정되지 않은 속성 값이 NULL을 가지는 경우
- 갱신이상: 데이터 갱신 시 일부분의 데이터만 갱신되어 일관성 유지가 안되는 경우
- 삭제이상: 행(Row) 삭제 시 원하지 않는 연쇄 삭제가 발생하는 현상

## 정규화의 단계
- 제1정규화
  - 테이블 내 속성의 원자성을 확보하는 단계
  - 기본키를 설정
- 제2정규화
  - 기본키가 2개 이상의 속성으로 이루어진 경우 부분 함수 종속성을 제거
- 제3정규화
  - 기본키를 제외한 컬럼 간 종속성을 제거
  - 이행 함수 종속성 제거
- BCNF(Boyce-Codd Normal Form)
  - 기본키를 제외하고 후보키가 있는 경우, 후보키가 기본키를 종속 시키면 분해
  - 결정자 함수 종속성을 제거하는 단계
  - 강한 제3정규화
- 제4정규화
  - 여러 컬럼들이 하나의 컬럼을 종속 시키는 경우 분해하여 다중값 종속성을 제거
- 제5정규화
  - 조인에 의한 종속성이 발생되는 경우 분해

## 정규화 주의사항
- 모든 정규화는 이전 정규화를 만족해야 한다.
- 정규화시 이상현상은 제거 되지만 테이블의 분해로 데이터 조인의 발생이 많아지고, 이는 조회 성능 저하로 이어질 수 있다.(I/O증가 및 조인 연산 증가)
- 단일 테이블 조회시엔 데이터 중복이 제거되어 조회 성능이 향상 될 여지가 있다.