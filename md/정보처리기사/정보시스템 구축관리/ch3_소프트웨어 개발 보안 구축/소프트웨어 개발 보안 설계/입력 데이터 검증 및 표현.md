# 입력 데이터 검증 및 표현

---

### 입력 데이터 검증 및 표현 개념
- 입력 데이터로 인해 발생하는 문제들을 예방
- 구현 단계에서 검증해야 하는 보안 점검 항목들
- 유효성 검증 체계, 검증되지 않은 데이터의 입력 처리

### 입력 데이터 검증 및 표현 취약점

<strong style="background: #FFD5D2; padding: 5px;">1. 입력 데이터 검증 및 표현 취약점</strong>

- **XSS(Cross Site Scripting)**
  - 검증되지 않은 외부 입력 데이터가 포함된 웹페이지가 전송되는 경우
  - 사용자가 해당 웹페이지를 열람함으로써 웹 페이지에 포함된 부적절한 스크립트가 실행
  - 대책
    - 특수문자 등록을 방지하기 위해 특수 문자 필터링
    - HTML 태그 사용 금지(특히, <문자 사용 시 &lt로 변환처리)
    - JS로 시작하는 문자열은 모두 문자열 변환처리
- **사이트 간 요청 위조(CSRF; Cross Site Request Forgery)**
  - 사용자가 자신의 의지와는 무관하게 공격자가 의도한 행위를 특정 웹사이트에 요청하게 하는 공격
  - 대책
    - 입력화면 폼 작성시 POST 방식 사용
    - 입력 폼과 입력처리 프로그램에서 세션별 CSRF 토큰 사용하여 점검
    - 중요기능의 경우 재인증을 통해 안전하게 실제 요청 여부 확인
- **SQL 삽입(Injection)**
  - 응용 프로그램의 보안 취약점을 이용해 악의적인 SQL 구문 삽입, 실행
  - DB 접근을 통해 정보를 탈취하거나 조작 등의 행위를 하는 공격
  - 대책
    - 바인딩 매개변수 방식 적용하여 사전에 변수 타입을 명시적으로 지정
    - 사용자로부터 입력될 수 있는 모든 값 체크
    - Servlet Filter 기능 적용(Java에서만 적용)

<strong style="background: #FFD5D2; padding: 5px;">2. XSS(Cross Site Scripting)</strong>

**XSS 공격 유형**

- **Stored XSS**
  - 방문자들이 악성 스크립트가 포함된 페이지를 읽어 봄과 동시에 악성 스크립트가 브러우저에서 실행되면서 감염
- **Reflected XSS**
  - 공격용 악성 URL 생성 후 이메일로 사용자에게 전송
  - 사용자가 URL 클릭 시 즉시 공격 스크립트가 피해자로 반사되어 접속 사이트에 민감정보를 공격자에게 전송
- **DOM(Document Object Model) XSS**
  - DOM 기반 XSS 취약점이 있는 브라우저를 대상으로 조작된 URL을 이메일을 통해 발송
  - URL 클릭 시 공격 피해를 당하는 기법

**XSS 공격 방식**
1. 임의의 XSS 취약점이 존재하는 서버에 XSS 코드 작성하여 삽입 저장
2. 해당 웹 서비스 사용자가 공격자가 작성해 놓은 XSS 코드에 접근
3. 사용자가 XSS 코드가 저장 된 페이지에 정보 요청
4. 사용자의 시스템에서 XSS 코드 실행
5. XSS 코드가 실행된 결과가 공격자에게 전달, 공격자는 결과를 가지고 웹 서버에서 2차 해킹 시도


<strong style="background: #FFD5D2; padding: 5px;">3. SQL 삽입(SQL Injection)</strong>

**SQL 삽입 개념**
- 임의로 작성한 SQL 구문을 애플리케이션에 삽입하는 공격 방식
- 데이터베이스 종류에 따라 약간씩 다른 공격 기법을 필요로 함

**SQL 삽입 공격 방식**
1. 응요 프로그램의 취약점 탐지
2. 악의적인 SQL 구문 사빕하여 인증 우회
3. 권한이 상승되어 DB의 정보 탈취 및 조작 실행


<strong style="background: #FFD5D2; padding: 5px;">4. CSRF(Cross-Site Request Forgery)</strong>

**CSRF 공격 방식**
1. 공격자는 CSRF 스크립트가 포함된 게시물을 등록
2. 사용자가 CSRF 스크립트가 포함된 페이지의 게시물 열람 요청
3. 게시물을 읽은 사용자의 권한으로 공격자가 원하는 요청 발생
4. 공격자가 원하는 CSRF 스크립트 결과가 발생