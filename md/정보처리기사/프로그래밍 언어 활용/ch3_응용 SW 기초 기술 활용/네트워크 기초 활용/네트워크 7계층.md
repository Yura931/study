# 네트워크 7계층

---

## OSI(Open System Interconnection) 7계층

- 국제 표준화 기구인 ISO(International Standardization Organization)에서 개발한 컴퓨터 네트워크 프로토콜 디자인과 통신을 계층으로 나누어 설명한 개방형 시스템 상호 연결 모델
- 각 계층은 서로 독립적으로 구성되어 있고, 각 계층은 하위 계층의 기능을 이용하여  상위 계층에 기능을 제공
- 1계층인 물리 계층부터 7계층인 애플리케이션 계층으로 정의
- 계층을 해당 계층의 기능과 관련된 제어 정보가 포함된 Header가 붙음
- 제어 정보들은 모두 운영체제가 제공하는 프로토콜에 의해 송신 측에서는 계층을 지날 때마다 덧붙여서 추가되고, 수신 측에서는 계층을 지날 때마다 제거 됨
- 각 계층에서 헤더와 데이터를 합친 부분 PDU(Protocol Data Unit)라 부름
- 계층마다 부르는 이름이 다름


- **7 - 응용계층(Application Layer)**
  - PDU 
    - 메시지(Message)
    - 데이터(Data)
- **6 - 표현 계층(Presentation Layer)**
  - PDU
    - 메시지(Message)
    - 데이터(Data)
- **5 - 세션 계층(Session Layer)**
  - PDU
    - 메시지(Message)
    - 데이터(Data)
- **4 - 전송 계층(Transport Layer)**
  - PDU
    - 세그먼트(Segment)
- **3 - 네트워크 계층(Network Layer)**
  - PDU
    - 패킷(Packet)
- **2 - 데이터 링크 계층(Data Link Layer)**
  - PDU
    - 프레임(Frame)
- **1 - 물리 계층(Physical Layer)**
  - PDU
    - 비트(Bit)


## 네트워크 7계층 상세설명

### 1. 계층 1 -물리 계층(Physical Layer)
**1) 물리 계층 개념**
- 실제 장치들을 연결하기 위해 필요한 전기적, 물리적 세부 사항들을 정의하는 계층
- 통신 채널을 통해 전송되는 사용자 자치의 디지털 데이터를 이에 상응하는 신호들로 변환(변조 및 복조)

**2) 물리 계층 개념도**
> - 송신측 데이터 링크 계층에서 데이터 단위(프레임) 전송 -> 에서 비트열의 데이터를 전자기적 신호로 변환 -> 전송 매체 통해 수신측 통신
> - 수신 측 전자기적 신호를 비트열의 데이터로 복원 -> 상위 계층 전달

- OSI 계층을 타고 전달된 데이터를 전기적인 신호(Bit)로 변환시켜 통신을 수행
- 데이터 링크 개체 간의 비트 전송을 위한 물리적 연결을 설정, 유지, 해제하기 위한 수단을 제공

**3) 물리 계층 프로토콜**
- **RS-232**
  - 1960년에 도입된 표준의 하나로, PC와 음향 커플러, 모뎀 등을 접속하는 직렬 방식의 인터페이스


**4) 물리 계층 장비**
> 허브, 리피터


- **허브(Hub)**
  - 여러 대의 컴퓨터를 연결하여 네트워크로 보내거나, 하나의 네트워크로 수신된 정보를 여러 대의 컴퓨터로 송신하기 위한 장비
- **리피터(Repeater)**
  - 디지털 신호를 증폭시켜 주는 역할을 하여 신호가 약해지지 않고 컴퓨터로 수신되도록 하는 장비

### 2. 계층 2 - 데이터 링크 계층(Data Link Layer)
**1) 데이터 링크 계층 개념**
- 링크의 설정과 유지 및 종료를 담당
- 물리적 연결을 이용해 신뢰성 있는 정보를 전송
- 동기화, 오류 제어, 흐름 제어, 회선 제어 기능 수행
- 네트워크 계층에 데이터를 전달하고, 물리 계층에서 발생할 수 있는 오류를 탐지하고 수정하는 기능 제공

**2) 데이터 링크 계층 개념도**
- 시스템 간에 오류 없는 데이터 전송을 위해 상위 계층에서 받은 패킷을 프레임으로 변환하여 물리 계층으로 전송
- 헤더의 끝에는 물리 주소 정보가 들어있고, 트레일러에는 오류를 검출하는 비트를 포함

**3) 데이터 링크 계층 프로토콜**

- **HDLC(High-level Data Link Control)**
  - 점대점 방식이나 다중방식의 통신에 사용되는 ISO에서 표준화한 동기식 비트 중심의 데이터 링크 프로토콜
- **PPP(Point-to-Point Protocol)**
  - 네트워크 분야에서 두 통신 노드 간의 직접적인 연결을 위해 일반적으로 사용되는 데이터 링크 프로토콜
- **프레임 릴레이(Frame Relay)**
  - 프로토콜 처리 간략화
  - 단순히 데이터 프레임들의 중계(Relay)기능과 다중화 기능만 수행함
  - 데이터 처리속도의 향상 및 전송지연을 감소시킨 고속의 데이터 전송 기능
- **ATM(Asynchronous Transport Mode)**
  - 정보전달의 기본단위를 53바이트 셀 단위로 전달하는 비동기식 시분할 다중화 방식의 패킷형 전송 기술


**4) 데이터 링크 계층 장비**

- **스위치(Switch)**
  - 느린 전송속도의 브리지, 허브의 단점을 개선
  - 출발지에서 들어온 프레임(Frame)을 목적지 MAC 주소 기반으로 빠르게 전송시키는 데이터 링크 계층의 통신 장치
  - 스위치의 전송방식 cut-through, store-and-forward, Fragment Free
- **브리지(Bridge)**
  - 두 개의 근거리 통신망(LAN)을 서로 연결해 주는 통신망

**i. 스위치 장비의 주요 기술 요소**
- **VLAN(Virtual Local Area network)**
  - 물리적 배치와 상관없이 논리적으로 LAN을 구성
  - Broadcast Domain을 구분할 수 있게 해주는 기술
  - 접속된 장비들의 성능향상 및 보안성 증대 효과
- **STP(Spanning Tree Protocol)**
  - 2개 이상의 스위치가 여러 경로로 연결될 때, 무한 루프 현상을 막기 위해서 우선순위에 따라 1개의 경로로만 통신하도록 하는 프로토콜

**5) 데이터 링크 계층의 오류 제어**
- 데이터 전송 시 감쇠, 왜곡, 잡음에 의해 생성된 오류를 검출하고 정정하는 기능
- 데이터 전송의 신뢰성을 위해 반드시 필요한 기능

**i. 오류 제어 방식의 종류**
- **전진(순방향) 오류 수정(FFC; Forward Error Correction)**
  - 데이터 전송 과정에서 발생한 오류를 검출하여 검출된 오류를 재전송 요구 없이 스스로 수정하는 방식
  - 오류 검출과 수정을 위한 방식에는 해밍 코드 방식과 상승 코드 방식이 있음
- **후진(역방향) 오류 수정(BEC; Backward Error Correction)**
  - 데이터 전송 과정에서 오류가 발생하면 송신 측에 재전송을 요구하는 방식
  - 패리티 검사, CRC, 블록합 검사 사용
  - 오류 제어는 자동 반복 요청(ARQ; Automatic Repeat reQuest)에 의해 이루어짐

**ii. 자동반복 요청 방식(ARQ)의 종류[스고셀]**
- **Stop-and Wait ARQ 방식**
  - 한 개의 프레임을 전송하고, 수신측으로부터 ACK 및 NAK 신호를 수신할 때까지 정보 전송을 중지하고 기다리는 방식
  - 송신 측이 수신 측으로부터 ACK를 받으면 다음 프레임 전송
  - NAK를 받으면 재전송
  - 데이터 프레임의 정확한 수신 여부를 매번 확인하면서 다음 프레임을 전송해 나가는 가장 간단한 오류 제어 방식
  - 구현이 간단, 송신 측에서 최대 프레임 크기의 버퍼가 1개만 있어도 됨
  - 전송시간이 긴 경우 전송효율이 저하
- **Go-Back-N ARQ 방식**
  - 데이터 프레임을 연속적으로 전송하는 과정에서 NAK를 수신하게 되면, 오류가 발생한 프레임 이후에 전송된 모든 데이터 프레임을 재전송
- **Selective Repeat ARQ 방식**
  - 연속적으로 데이터 프레임을 전송하고 에러가 발생한 데이터 프레임만 재전송하는 방식


### 3. 계층 3-네트워크 계층(Network Layer)

**1) 네트워크 계층 개념**
- 다양한 길이의 패킷을 네트워크들을 통해 전달
- 그 과정에서 전송 계층이 요구하는 서비스 품질(QoS)을 위한 수단을 제공
- 라우팅, 패킷 포워딩, 인터 네트워킹(Inter-Networking) 등을 수행
- 패킷에 발신지와 목적지의 논리 주소를 추가
- 패킷을 발신지로부터 최종 목적지까지 전달하는 책임

**2) 네트워크 계층 개념도**
- 패킷을 네트워크를 통해 발신지에서 목적지까지 전달하기 위해, 라우팅 프로토콜을 사용하여 최적의 경로 선택
- 데이터를 전송 할 데이터의 주소 확인 후 전송 계층으로 전달

**3) 네트워크 계층 프로토콜**
> IP, ARP, RARP, ICMP, IGMP, 라우팅 프로토콜


- **IP(Internet Protocol)**
  - 송신, 수신 간의 패킷 단위로 데이터를 교환하는 네트워크에서 정보를 주고받는 데 사용하는 통신규약
- **ARP(Address Resolution Protocol)**
  - IP 네트워크상에서 IP주소를 MAC 주소(물리 주소)로 변환하는 프로토콜
- **RARP(Reverse Address Resolution Protocol)**
  - IP 호스트가 자신의 물리 네트워크 주소(MAC)는 알지만 IP 주소를 모르는 경우
  - 서버로부터 IP 주소를 요청하기 위해 사용하는 프로토콜
- **ICMP(Internet Control Message Protocol)**
  - IP의 동작 과정에서의 전송 오류가 발생하는 경우에 대비해 오류 정보를 전송하는 목적으로 사용
  - 메시지 형식은 8바이트의 헤더와 가변 길이의 데이터 영역으로 분리
  - 수신지 도달 불가 메시지는 수신지 또는 서비스에 도달할 수 없는 호스트를 통지하는데 사용
  - ICMP 프로토콜을 사용해 ping 유틸리티 구현
- **IGMP(Internet Group Management Protocol)**
  - 인터넷 그룹 관리 프로토콜은 호스트 컴퓨터와 인접 라우터가 멀티캐스트 그룹 멤버십을 구성하는 데 사용
  - 화상회의, IPTV에서 활용되는 프로토콜
  - IGMP 기능에는 그룹 가입, 멤버십 감시, 멤버십 응답, 멤버십 탈퇴 있음
- **라우팅 프로토콜**
  - 내부 라우팅 프로토콜에는 RIP(Routing Information Protocol), OSPF(Open Shortest Path First)가 대표적
  - 외부 라우팅 프로토콜에는 EGP, BGP가 대표적

**4) 네트워크 계층 장비**

- **라우터(Router)**
  - 서로 다른 네트워크 대역에 있는 호스트들 상호 간에 통신할 수 있도록 해주는 네트워크 장비
  - 패킷의 위치를 추출하여 그 위치에 대한 최적의 경로를 지정
  - 경로를 따라 데이터 패킷을 다음 장치로 전송시키는 장비
  - 라우팅 프로토콜은 경로 설정을 하여 원하는 목적지까지 데이터가 안전하게 전달되도록 함

- **L3 스위치(L3 Switch)**
  - 3계층에서 네트워크 단위들을 연결하는 통신 장비
  - IP 레이어에서의 스위칭을 수행하여 외부로 전송
  - L2 기능 + 경로 제어 기능 + 고속 라우팅 기능 수행

- 네트워크 계층의 장비인 라우터는 패킷 전달을 위해 경로를 지정하거나 교환 기능을 제공

### 4. 계층 4-전송계층(Transport Layer)

**1) 전송 계층 개념**
- 상위 계층들이 데이터 전달의 유효성이나 효율성을 생각하지 않도록 해주면서 종단 간의 사용자들에게 신뢰성 있는 데이터를 전달하는 계층
- 순차 번호 기반의 오류 제어 방식을 사용
- 종단 간 통신을 다루는 최하위 계층
- 종단 간 신뢰성 있고 효율적인 데이터 전송

**2) 전송 계층 개념도**
- 프로토콜(TCP, UDP)로 구성되어 오류 제어, 흐름 제어, 혼잡 제어 등을 담당
- 두 시스템 간 신뢰성 있는 데이터를 전송

**3) 전송 계층 프로토콜**

> TCP(연결 지향), UDP(비연결 지향)

- **TCP(Transmission Control Protocol)**
  - 전송 계층에 위치
  - 근거리 통신망이나 인트라넷
  - 인터넷에 연결된 컴퓨터에서 실행되는 프로그램 간 일련의 옥텟을 안정적으로, 순서대로, 에러 없이 교환할 수 있게 해주는 프로토콜
- **UDP(User Datagram Protocol)**
  - 비연결성
  - 신뢰성이 없으며, 순서화되지 않은 데이터 그램 서비스를 제공
  - 전송 계층 통신 프로토콜

**4) 전송 계층 장비**

- **L4 스위치(L4 Switch)**
  - 4계층에서 네트워크 단위들을 연결하는 통신 장비
  - TCP/UDP 등스위칭 수행
  - FTP, HTTP 등을 구분하여 스위칭하는 로드 밸런싱 가능
  - 애플리케이션 레이어에서 파악이 가능한 이메일 내용 등 정교한 로드 밸런싱 수행은 불가
  - 4계층 정보인 TCP/UDP 포트 번호를 분석하여 포워딩을 결정
  - QoS와 GLB/SLB 기능을 제공


### 5. 계층 5-세션 계층(Session Layer)

**1) 세션 계층 개념**
- 응용 프로그램 간의 대화를 유지하기 위한 구조를 제공
- 프로세스들의 논리적인 연결을 담당하는 계층
- 통신 중 연결이 귾어지지 않도록 유지시켜주는 역할 수행
- TCP/IP 세션 연결의 설정과 해제, 세션 메시지 전송 등의 기능 수행

**2) 세션 계층 개념도**
- 통신을 하기 위한 세션 확립, 유지, 중단을 수행
- 통신하는 사용자들을 동기화
- 오류 복구 명령들을 일괄적으로 처리

**3) 세션 계층 프로토콜**

- **RPC(Remote Procedure Call)**
  - 원격 프로시저 호출
  - 별도의 원격 제어를 위한 코딩 없이 다른 주소 공간에서 함수나 프로시저를 실행할 수 있는 프로세스 간 통신에 사용되는 프로토콜
- **NetBIOS(Network Basic Input / Output System)**
  - 응용계층(7계층)의 애플리케이션 프로그램에게 API를 제공하여 상호 통신할 수 있도록 해주는 프로토콜


### 6. 계층 6-표현 계층(Presentation Layer)

**1) 표현 계층 개념**
- 애플리케이션이 다루는 정보를 통신에 알맞은 형태로 만들거나, 하위 계층에서 온 데이터를 사용자가 이해할 수 있는 형태로 만드는 역할
- 수신자 장치에서 적합한 애플리케이션을 사용하여 응용계층 데이터의 부호화 및 변환 수행을 통해 송신 장치로부터 온 데이터를 해석

**2) 표현 계층 개념도**
- 데이터의 효율과 보안을 위해 압축과 암호화를 수행, 전송을 위한 포맷으로 변경을 수행

**3) 표현 계층 프로토콜**
> JPEG, MPEG

- **JPEG**
  - 이미지를 위해 만들어진 표준 규격
- **MPEG**
  - 멀티미디어(비디오, 오디오)를 위해 만들어진 표준 규격


### 7. 계층 7-응용 계층(Application Layer)

**1) 응용 계층 개념**
- 응용 프로세스와 직접 관계하여 일바적인 응용 서비스를 수행하는 역할
- 응용 프로세스가 개방된 형태로 다양한 범주의 정보처리기능을 수행할 수 있도록 여러 가지 프로토콜 개체에 대하여 사용자 인터페이스 제공

**2) 응용 계층 개념도**
- 응용 프로세스 간의 정보 교환, 파일 전송 등의 서비스 제공

**3) 응용 계층 프로토콜**
> HTTP, FTP, SMTP, POP3, IMAP, Telnet, SSH, SNMP

- **HTTP(HyperText Transfer Protocol)**
  - 텍스트 기반의 통신규약으로 인터넷에서 데이터를 주고받을 수 잇는 프로토콜
  - 하이퍼텍스트를 빠르게 교환하기 위한 프로토콜
  - 포트 번호 : 80
- **FTP(File Transfer Protocol)**
  - TCP/IP 프로토콜을 가지고 서버와 클라이언트 사이의 파일을 전송하기 위한 프로토콜
  - 포트 번호 : 21
- **SMTP(Simple Mail Transfer Protocol)**
  - 인터넷에서 TCP 포트 번호 25번을 사용하여 이메일을 보내기 위해 이용
  - 포트 번호 : 25
- **POP3(Post Office Protocol Version 3)**
  - 응용 계층 인터넷 프로토콜
  - 원격 서버로부터 TCP/IP 연결을 통해 이메일을 가져오는데 사용
  - 사용자의 기기로 이메일을 다운로드하여 읽는 프로토콜
  - 포트 번호 : 110
- **IMAP(Internet Messaging Access Protocol)**
  - 원격 서버로부터 TCP/IP 연결을 통해 이메일을 가져오는데 사용
  - 서버에서 이메일을 읽는 프로토콜
  - 포트 번호 : 143
- **Telnet**
  - 인터넷이나 로컬 영역에서 네트워크 연결에 사용되는 네트워크 프로토콜
  - 포트 번호 : 23
- **SSH(Secure Shell)**
  - Telnet보다 강력한 보안을 제공하는 원격접속 프로토콜
  - 서로 연결되어 있는 컴퓨터 간 원격 명령 실행이나 쉘 서비스 등을 수행
  - 키를 통한 인증은 클라이언트의 공개키를 서버에 등록해야 하고 전송되는 데이터는 암호화 됨
  - SSH는 인증, 암호화, 압축, 무결성을 제공
  - 포트 번호 : 22
- **SNMP(Simple Network Management Protocol)**
  - TCP/IP의 네트워크 관리 프로토콜
  - 라우터나 허브 등 네트워크 장치로부터 정보를 수집 및 관리
  - 정보를 네트워크 관리 시스템에 보내는 데 사용하는 인터넷 표준 프로토콜
  - 포트 번호 : 161

**4) 응용 계층 장비**
- **L7 스위치(L7 Switch)**
  - 응용 계층에 해당하는 애플리케이션 정보를 지능적으로 분석하여 트래픽을 관리하는 네트워크 스위치 장비

