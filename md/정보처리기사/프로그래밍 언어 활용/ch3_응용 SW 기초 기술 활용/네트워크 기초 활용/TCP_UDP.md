# TCP/UDP

---

## TCP(Transmission Control Protocol)

### 1. TCP 개념
- 전송 계층에 위치하면서 근거리 통신망이나 인트라넷, 인터넷에 연결된 컴퓨터에서 실행되는 프로그램 간
- 일련의 옥텟을 안정적으로, 순서대로 에러 없이 교환할 수 있게 해주는 프로토콜
- TCP 기본 헤더 크기는 20byte, 60byte까지 확장
- 순서 제어, 오류 제어, 흐름 제어 기능을 제공
- TCP는 인터넷 프로토콜 스위트(IP)의 핵심 프로토콜 중 하나
- IP와 함께 TCP/IP라는 명칭으로 사용
- 전 이중(Full Duplex) 방식의 양방향 가상 회선을 제공
- 전송 데이터와 응답 데이터를 함께 전송 할 수 있음

### 2. TCP 특징(신연흐혼)

- **신뢰성 보장**
  - 패킷 손실, 중복, 순서 바뀜 등이 없도록 보장
  - TCP 하위계층인 IP 계층의 신뢰성 없는 서비스를 보완하여 신뢰성 제공
  - 신뢰성 있는 스트림 전송 기능을 제공
- **연결 지향적 특징**
  - 같은 전송계층의 UDP가 비연결성인 것과는 달리, TCP는 연결 지향적
  - 양단 간 애플리케이션/프로세스는 TCP가 제공하는 연결성 회선을 통하여 서로 통신
  - 신뢰성 있는 연결 지향형 전달 서비스
- **흐름 제어(Flow Control)**
  - 흐름 제어 기능을 활용하여 송신(송신 전송률) 및 수신(수신 처리율) 속도를 일치시킴
- **혼잡 제어(Congestion Control)**
  - 네트워크가 혼잡하다고 판단될 경우 혼잡 제어 기법을 사용하여 송신율 감속

### 3. TCP 헤더 구조
- 헤더 구조에서 Options와 Padding은 생략 할 수 있어 TCP 헤더의 최소 크기ㅡㄴ 20바이트
- Options 필드는 다양한 종류의 부가 정보를 전달하는 데 사용, 최대 40바이트 크기 지원
- Pdding 필드는 헤더의 크기를 4바이트 단위로 맞추려고 사용


- **Source/Destination Port Number**
  - 송신지 Port 번호, 목적지 Port 번호
  - 양쪽 호스트 내 종단 프로세스 식별
  - 각 16비트
- **Sequence Number**
  - 바이트 단위로 구분되어 순서화 되는 번호
  - TCP에서는 신뢰성 및 흐름 제어 기능 제공
  - 32 비트
- **Acknowledgement Number**
  - 확인 응답 번호/승인 번호
  - 상대편 호스트에서 받으려는 바이트 번호를 정의
  - 32비트
- **HLEN(Header Length)**
  - TCP 헤더 길이를 4바이트(32비트) 단위로 표시
  - 4비트
- **Flag Bit**
  - TCP 연결 설정과 연결 해제 메시지를 구분하는 것이 제어 필드의 기능, 제어 필드는 1bit로 구성
  - URG, ACK, PSH, PST, SYN, FIN으로 구성
  - 6비트
- **Window Size**
  - 해당 세그먼트의 송신측이 현재 수신하고자 하는 윈도의 크기(기본 단위는 바이트)
  - 윈도우 크기는 송수신 측의 버퍼 크기로 전체 16bit로 되어 있음
  - 2(16)까지 표기 가능
  - 최대 크기는 65.535byte
  - 16비트
- **Checksum**
  - 헤더 및 데이터의 에러 확인을 위해 사용되느 16 비트 체크 섬 필드
  - 데이터를 포함한 세그먼트의 오류를 검사
  - 16비트
- **Urgent Pointer**
  - URG 플래그가 설정된 경우, 이 16비트 필드는시퀀스 번호로부터의 오프셋을 나타냄
  - 16비트


### 4. TCP 흐름 제어(Flow Control)

- 전송 계층에서 데이터 패킷을 전송할 때 수신 한도를 넘는 과잉 패킷의 입력으로 패킷 분실이 이렁나지 않도록 패킷의 흐름을 조절하는 기법

- **정지-대기(Stop & Wait) 기법**
  - 수신자가 에러 체크 후 에러가 있으면 에러 난 데이터부터 하나씩 다시 받는 기법
  - 프레임이 손실되었을 때, 손실된 프레임 1개를 전송하고 수신자의 응답을 기다리는 방식
  - 한 번에 프레임 1개만 전송 할 수 있음
- **슬라이딩 윈도(Sliding Window) 기법**
  - 수신 측에서 설정한 윈도의 크기만큼 송신 측에서 확인 응답(Ack) 없이 전송할 수 있게 하여 흐름을 동적으로 제어
  - 수신 측에서 제대로 수신한 바이트에 대한 확인 응답을 전송할 때마다 버퍼의 범위가 한꺼번에 이동
  - 호스트는 각 연결마다 하나의 윈도 이동
  - 윈도 크기는 수신 측 윈도(rwnd, receiver window)와 혼잡 윈도(cwnd, congestion window)의 크기 중 작은 값으로 결정


## UDP(User Datagram Protocol)

### 1. UDP 개념
- 비연결성이고, 신뢰성이 없으며, 순서화되지 않은 데이터그램 서비스를 제공하는 전송 계층(4계층)의 통신 프로토콜

### 2. UDP 특징

- **비연결성 및 비신뢰성**
  - 데이터그램 지향의 전송계층용 프로토콜(논리적인 가상회선 연결이 필요 없음)
  - 메시지가 제대로 도착했는지 확인하지 않음(확인 응답 없음)
  - 검사 합을 제외한 특별한 오류 검출 및 제어 없음(오류 제어 거의 없음)
- **순서화되지 않은 데이터그램 서비스 제공**
  - 수신된 메시지의 순서를 맞추지 않음
  - 흐름 제어를 위한 피드백을 제공하지 않음
- **실시간 응용 및 멀티캐스팅 가능**
  - 빠른 요청과 응답이 필요한 실시간 응용에 적합
  - 여러 다수 지점에 전송 가능
- **단순 헤더**
  - 헤더는 고정 크기의 8바이트(TCP는 20바이트)만 사용
  - 헤더 처리에 시간과 노력을 필요로 하지 않음

### 3. UDP 헤더 구조[소데 랭체]

- Source Port Number
- Destination Port Number
- UDP Length
- UDP Checksum



